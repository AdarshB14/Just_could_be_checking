

# âœ… **CORRECTED & COMPLETE AWS CONSOLE WALKTHROUGH**

(including IAM roles + Lambda + SNS)

---

# 0ï¸âƒ£ **Create IAM Roles BEFORE anything that needs permissions**

IAM is required for:

* EC2 Launch Templates (instance profile)
* ECS task execution role
* Lambda execution role
* SNS publish role

You must set this up early.

---

# **Aï¸âƒ£ CREATE IAM ROLES**

## **A1. Create IAM Role for EC2 (Instance Profile)**

Used by ASG/EC2 to:

* Access S3
* Access SSM (Session Manager)
* Write logs
* Pull from ECR (if ECS EC2 mode)

### Steps

1. Top search bar â†’ **IAM**
2. Left panel â†’ **Roles**
3. Click **Create role**
4. Choose **Trusted entity type = AWS service**
5. Under services â†’ pick **EC2**
6. Click **Next**

### Attach permissions:

* Tick:

  * **AmazonSSMManagedInstanceCore** (SSM + logging)
  * **AmazonS3ReadOnlyAccess** (if your app pulls static assets)
  * **AmazonEC2ContainerRegistryReadOnly** (if needed)

7. Click **Next**
8. Name the role: **EC2-InstanceRole**
9. Click **Create role**

Now you have an IAM role for EC2.

---

## **A2. Create IAM Role for Lambda (Execution Role)**

Used when exam asks you to:

* Trigger Lambda
* Process something
* Send SNS alerts
* Write logs to CloudWatch

### Steps

1. IAM â†’ **Roles** â†’ **Create role**
2. Trusted entity = **AWS Service**
3. Choose **Lambda**
4. Next

### Attach permissions:

* **AWSLambdaBasicExecutionRole** (CloudWatch logs)
* **AmazonSNSFullAccess** (if Lambda must publish SMS/email alerts)

5. Name: **Lambda-ExecutionRole**
6. Create role.

---

## **A3. Create IAM Role for ECS Task Execution**

Used only if question involves containers/ECR.

### Steps

1. IAM â†’ Create role
2. Trusted service: **Elastic Container Service** â†’ **Elastic Container Service Tasks**
3. Permissions:

   * **AmazonECSTaskExecutionRolePolicy**
4. Name: **ECS-TaskExecutionRole**
5. Create.

---

# ğŸŸ¦ From here onward, networking steps stay unchanged

Now that IAM is fixed, we continue with:

---

# 1ï¸âƒ£ **Create VPC**

1. AWS Console search â†’ **VPC**
2. Left side â†’ **Your VPCs**
3. **Create VPC**

   * Name: `MyExamVPC`
   * IPv4 CIDR: `10.0.0.0/16`
4. **Create**

---

# 2ï¸âƒ£ **Create Subnets**

1. Left panel â†’ **Subnets** â†’ Create subnet
2. Pick VPC = `MyExamVPC`

Create these:

### Public

* `PublicSubnetA` â€” AZ1 â€” `10.0.1.0/24`
* `PublicSubnetB` â€” AZ2 â€” `10.0.2.0/24`

### Private

* `PrivateSubnetA` â€” AZ1 â€” `10.0.3.0/24`
* `PrivateSubnetB` â€” AZ2 â€” `10.0.4.0/24`

Click **Create subnet**.

---

# 3ï¸âƒ£ **Create Internet Gateway (IGW)**

1. Left panel â†’ **Internet Gateways**
2. Create IGW
3. Name: `MyIGW`
4. Click **Actions â†’ Attach to VPC**
5. Select `MyExamVPC` â†’ Attach

---

# 4ï¸âƒ£ **Create NAT Gateway**

1. Left panel â†’ **NAT Gateways**
2. Create NAT Gateway
3. Subnet = **PublicSubnetA**
4. Allocate Elastic IP
5. Name: `MyNAT`
6. Create

---

# 5ï¸âƒ£ **Route Tables**

### Public Route Table

1. Route Tables â†’ Create route table
2. Name: `PublicRT`
3. VPC: `MyExamVPC`
4. Select `PublicRT` â†’ Routes â†’ Edit routes

   * Add `0.0.0.0/0` â†’ target: **Internet Gateway (MyIGW)**
5. Subnet associations â†’ Tick PublicSubnetA + PublicSubnetB â†’ Save

### Private Route Table

1. Create â†’ name: `PrivateRT`
2. Edit routes:

   * `0.0.0.0/0` â†’ target: **NAT Gateway (MyNAT)**
3. Associate:

   * PrivateSubnetA + PrivateSubnetB

---

# 6ï¸âƒ£ **Create Security Groups**

## ALB-SG

1. EC2 â†’ Security Groups â†’ Create SG
2. Name: `ALB-SG`
3. VPC: `MyExamVPC`
4. Inbound:

   * HTTP 80 â†’ Source: `0.0.0.0/0`
5. Create

## App-SG

1. Create SG
2. Name: `App-SG`
3. Inbound:

   * HTTP 80 â†’ Source: **ALB-SG** (use SG picker)
4. Create

## (Optional) DB-SG

* MySQL/Postgres port â†’ Source: **App-SG**

---

# 7ï¸âƒ£ OPTIONAL (Only if question includes alerts): SNS + Lambda

## **SNS Topic (for SMS/email alerts)**

### Steps

1. AWS search â†’ **SNS**
2. Left panel â†’ **Topics**
3. Create topic:

   * Type: **Standard**
   * Name: `AlarmTopic`
4. Create topic

### Add Subscription

1. SNS â†’ `AlarmTopic` â†’ Subscriptions â†’ **Create subscription**
2. Protocol: **SMS** or **Email**
3. Endpoint: phone number or email
4. Confirm subscription (email OTP usually required)

**Note:** Exam sandboxes may block real SMS â€” use **Email** unless SMS is explicitly allowed.

---

## **Lambda Function**

Used for:

* Alerts
* Auto-healing tasks
* Basic backend logic

### Create Lambda

1. AWS search â†’ **Lambda**
2. Click **Create function**
3. Author from scratch:

   * Name: `MyLambda`
   * Runtime: Python or Node.js
   * Execution role: **Use existing role** â†’ `Lambda-ExecutionRole`

### Simple alert code example (Python):

```
import boto3

def lambda_handler(event, context):
    sns = boto3.client('sns')
    sns.publish(
        TopicArn='arn:aws:sns:region:acct-id:AlarmTopic',
        Message='Alert from Lambda'
    )
    return 'OK'
```

Deploy â†’ Test function.

---

# 8ï¸âƒ£ **Create Application Load Balancer**

1. EC2 â†’ Load Balancers â†’ Create Load Balancer
2. **Application Load Balancer**
3. Name: `MyALB`
4. Scheme: Internet-facing
5. Listeners: HTTP 80
6. VPC: `MyExamVPC`
7. Subnets:

   * PublicSubnetA
   * PublicSubnetB

### Choose Security Group

* **ALB-SG**

### Create Target Group

1. Click **Create target group**
2. Target type: **Instance**
3. Name: `MyTG`
4. Port: 80
5. Health check path: `/`
6. Create

Return to ALB â†’ choose `MyTG` â†’ Create ALB.

---

# 9ï¸âƒ£ **Create Launch Template**

1. EC2 â†’ Launch Templates â†’ Create launch template
2. Name: `MyLT`
3. IAM Instance Profile: **EC2-InstanceRole**
4. Security Group: **App-SG**
5. User data:

```
#!/bin/bash
yum install -y httpd
echo "Hello from AutoScaled EC2 instance" >/var/www/html/index.html
systemctl start httpd
systemctl enable httpd
```

Create.

---

# ğŸ”Ÿ **Create Auto Scaling Group (ASG)**

1. EC2 â†’ Auto Scaling Groups â†’ Create ASG
2. Name: `MyASG`
3. Choose Launch Template: `MyLT`
4. VPC: `MyExamVPC`
5. Subnets:

   * PrivateSubnetA
   * PrivateSubnetB

### Attach to ALB

* Choose **Attach to existing LB**
* Select **MyTG** target group

### Health Checks:

* Check **Enable ELB health checks**
* Grace period: 60 sec

### Group Size:

* Desired: 2
* Min: 2
* Max: 4

### Scaling Policy:

* Choose **Target Tracking**
* Metric: **CPU Utilization**
* Target: **50%**

Create ASG.

---

# 1ï¸âƒ£1ï¸âƒ£ **Test the website**

1. EC2 â†’ Load Balancers â†’ Click **MyALB**
2. Copy the **DNS name**
3. Paste into browser â†’ Should show web page from EC2 instances.

---

# 1ï¸âƒ£2ï¸âƒ£ **Failure Modes + EXACT Fix Navigation**

### âŒ *ALB Targets â†’ Unhealthy*

Go to:
EC2 â†’ Target Groups â†’ MyTG â†’ Targets
Check:

* Port correct
* App-SG allows ALB-SG
* User-data installed webserver
* Health check path responds 200

### âŒ *Instances not launching in ASG*

Go to:
ASG â†’ Activity â†’ Status reason

Fix:

* IAM role missing â†’ add EC2-InstanceRole
* Wrong AMI â†’ update template
* Subnets not available â†’ reselect two AZs

### âŒ *NAT not working (private EC2 cannot install packages)*

Check:
VPC â†’ Route Tables â†’ PrivateRT â†’ Routes
`0.0.0.0/0 â†’ NAT Gateway`

Check NAT GW:
NAT must be in **public subnet**.

### âŒ *Lambda cannot publish SNS*

Check IAM role:
IAM â†’ Roles â†’ Lambda-ExecutionRole â†’ Permissions
Must include:

* `AWSLambdaBasicExecutionRole`
* `AmazonSNSFullAccess`

---






ğŸ¯ PART 1 â€” MASTER DECISION TABLE (WHAT THE QUESTION REALLY WANTS)

Memorize this table. If you see the keyword, you already know the architecture.

If the question contains these wordsâ€¦	The expected solution isâ€¦	Components required
â€œBulletproofâ€, â€œHighly Availableâ€, â€œHAâ€, â€œMulti-AZâ€, â€œZero downtimeâ€, â€œScalableâ€	ALB + Auto Scaling Group + EC2 (private subnets)	VPC, 2 public + 2 private subnets, IGW, NAT, Route Tables, ALB, TG, LT, ASG, SGs
â€œDeploy a web applicationâ€, â€œDynamic webappâ€, â€œBackendâ€, â€œEC2 applicationâ€	Simple EC2 or ALB + EC2 depending on marks	VPC, Public subnet OR (if 30 marks) ALB + ASG
â€œLoad balancedâ€, â€œDistribute trafficâ€, â€œPublic endpoint with private serversâ€	Application Load Balancer	ALB, Target Group, Public subnets, Private app servers
â€œScalable web tierâ€, â€œAuto scalingâ€, â€œHandle traffic spikesâ€	Auto Scaling Group	LT, ASG, ALB (optional), health checks
â€œContainerized applicationâ€, â€œDocker imageâ€, â€œECRâ€, â€œMicroserviceâ€, â€œECSâ€	ECS Service + ALB + ECR	VPC, SGs, Task Definition, Execution Role, Service, ALB
â€œPersistent layerâ€, â€œMYSQL/Postgresâ€, â€œDatabase tierâ€, â€œPrivate databaseâ€	RDS in private subnet	RDS, DB-SG, subnet group, private networking
â€œSecureâ€, â€œHardenâ€, â€œBackend not publicâ€, â€œLeast privilegeâ€	Private subnets + SG chaining + IAM roles	No public IPs, private app tier, SG references
â€œSend notificationsâ€, â€œTrigger alertâ€, â€œServerless eventâ€, â€œBackground processingâ€	Lambda + SNS (or CloudWatch alarm)	Lambda function, execution role, SNS topic
â€œHost static content via CDNâ€	CloudFront + S3 (rare in 30 marks)	CloudFront, S3
â€œAPIâ€, â€œREST endpointâ€, â€œTrigger Lambdaâ€, â€œAPI eventsâ€	API Gateway + Lambda	API Gateway, Lambda, execution role
ğŸ¯ PART 2 â€” EXACT ARCHITECTURE YOU SHOULD BUILD BASED ON QUESTION TYPE

This is a breakdown of the actual builds used in 25â€“30 mark questions.

1ï¸âƒ£ HIGH-AVAILABILITY WEB APPLICATION (most common 30-mark)
Keywords you will see:

â€œHighly Available Web Applicationâ€

â€œBulletproofâ€

â€œLoad Balancedâ€

â€œMulti-AZâ€

â€œScalable backendâ€

â€œUse EC2 instancesâ€

You MUST build:
User â†’ ALB (Public Subnets)
           â†“
     ASG (Private Subnets)
           â†“
       EC2 instances

Components Required:

VPC

2 Public Subnets

2 Private Subnets

Internet Gateway

NAT Gateway

Public Route Table â†’ IGW

Private Route Table â†’ NAT

Security Groups:

ALB-SG: allow 80/443 from world

App-SG: allow 80 from ALB-SG

Launch Template

Auto Scaling Group

Application Load Balancer

Target Group

Health Check configured

IAM instance role

Examiner scoring:

8 marks â†’ VPC + subnets

5 marks â†’ ALB correct setup

5 marks â†’ ASG correct setup

4 marks â†’ SG chain

3 marks â†’ NAT + routing

5 marks â†’ working deployment

2ï¸âƒ£ CONTAINER WEB APPLICATION (ECS + ECR + ALB)
Keywords:

â€œDockerâ€

â€œECR repositoryâ€

â€œDeploy using containersâ€

â€œECS clusterâ€

â€œMake service available publiclyâ€

â€œMicroservicesâ€

Architecture:
User â†’ ALB â†’ ECS Service â†’ Tasks â†’ (pull image from ECR)

Components required:

VPC (public + private subnets)

ALB (public)

Task Definition

Execution Role: ECS-TaskExecutionRole

ECR repo with pushed image

ECS Cluster

ECS Service

Target Group (IP target type for Fargate)

SGs:

ALB-SG open to world

ECS-SG allows from ALB-SG

Examiner scoring:

6 â†’ networking

6 â†’ ALB

8 â†’ ECS setup

5 â†’ task definition + execution role

5 â†’ working URL

3ï¸âƒ£ THREE-TIER APPLICATION (ALB â†’ ASG â†’ RDS)
Keywords:

â€œDatabase tierâ€

â€œPersistent layerâ€

â€œRDSâ€

â€œSecure backendâ€

â€œDo not expose DB publiclyâ€

Architecture:
User â†’ ALB â†’ ASG â†’ EC2 â†’ RDS (private subnet)

Components:

Everything from HA architecture
PLUS:

RDS instance in private subnets

DB-SG allowing only App-SG

Private subnet group

RDS: Public accessibility = No

Examiner scoring:

6 â†’ DB subnet group

5 â†’ DB SG chaining

3 â†’ DB creation

16 â†’ web tier

4ï¸âƒ£ SERVERLESS EVENT / ALERTING (Lambda + SNS)
Keywords:

â€œSend notificationâ€

â€œTrigger on eventâ€

â€œLambda function publishes to SNSâ€

â€œCloudWatch alarm triggers Lambdaâ€

Architecture:
CloudWatch/Lambda trigger â†’ Lambda â†’ SNS Topic â†’ SMS/Email

Required:

IAM Role for Lambda (Lambda-ExecutionRole with SNS publish)

Lambda function

SNS topic

Subscription (email or SMS)

Examiner scoring:

5 â†’ Lambda creation

5 â†’ Execution role

5 â†’ SNS setup

5 â†’ Trigger

5 â†’ Working alert

5ï¸âƒ£ SIMPLE PUBLIC EC2 WEBAPP (for 20â€“25 marks)
Keywords:

â€œLaunch a website quicklyâ€

â€œExpose EC2 to the internetâ€

â€œUser connects directlyâ€

â€œNo load balancing requiredâ€

Architecture:
User â†’ EC2 (Public Subnet + Public IP)

Requirements:

VPC

Public subnet

IGW

Route table configured

EC2 instance with public IP

SG allowing 80/443

User-data to install web server
